<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.zerock.oscatest.mapper.AdminMapper">



    <!--Admin======================================================================================================-->
    <sql id="adSearch">
        <where>
            <if test="keyword != null">
                <foreach collection="types" item="item" separator=" OR " open="(" close=")">
                    <if test='item == "t"'>
                        adid like concat('%', #{keyword}, '%')
                    </if>
                    <if test='item == "c"'>
                        adname like concat('%', #{keyword}, '%')
                    </if>
                    <if test='item == "w"'>
                        adcall like concat('%', #{keyword}, '%')
                    </if>
                </foreach>
            </if>
        </where>
    </sql>

    <select id="selectAdminList" resultType="org.zerock.oscatest.domain.Admin">
        select adno, adID,adName, adCall, adEmail, authority, regDate, updateDate
        from tbl_admin

        <include refid="adSearch"></include>

        order by adno asc
        limit #{skip},#{size}
    </select>

    <select id="getAdminTotal" resultType="int">
        select count(adno) from tbl_admin
        <include refid="adSearch"></include>
    </select>
    <!--===========================================================================================================-->

    <!--Requester==================================================================================================-->
    <sql id="reqSearch">
        <where>
            <if test="keyword != null">
                <foreach collection="types" item="item" separator=" OR " open="(" close=")">
                    <if test='item == "t"'>
                        reqid like concat('%', #{keyword}, '%')
                    </if>
                    <if test='item == "c"'>
                        reqname like concat('%', #{keyword}, '%')
                    </if>
                    <if test='item == "w"'>
                        reqcall like concat('%', #{keyword}, '%')
                    </if>
                </foreach>
            </if>
        </where>
    </sql>

    <select id="selectRequesterList" resultType="org.zerock.oscatest.domain.Requester">
        select *
        from tbl_requester

        <include refid="reqSearch"></include>

        order by reqno asc
        limit #{skip},#{size}
    </select>
    <select id="getRequesterTotal" resultType="int">
        select count(reqno) from tbl_requester
        <include refid="reqSearch"></include>
    </select>
    <!--===========================================================================================================-->

    <!--Contractor=================================================================================================-->
    <select id="selectContractorList" resultType="org.zerock.oscatest.domain.Contractor">
        select *
        from tbl_contractor


        order by ctno asc
        limit #{skip},#{size}
    </select>
    <select id="getContractorTotal" resultType="int">
        select count(ctno) from tbl_contractor
    </select>
    <!--===========================================================================================================-->

    <!--Contract===================================================================================================-->
    <select id="selectContractList" resultType="org.zerock.oscatest.domain.Contract">
        select *
        from tbl_contract
        order by conno asc
            limit #{skip}, #{size}
    </select>

    <select id="getContractTotal" resultType="int">
        select count(conno)from tbl_contract
    </select>
    <!--===========================================================================================================-->


</mapper>
